function loadSettings(){chrome.storage.local.get(null,function(e){document.querySelectorAll('input[type="checkbox"].feature').forEach(t=>{let l=t.id;void 0!==e[l]&&(t.checked=e[l])}),toggleAdvancedOptions(),toggleDataCollectionOptions()})}function setupEventListeners(){document.querySelectorAll('input[type="checkbox"].feature').forEach(e=>{e.addEventListener("change",function(){let e=this.id,t=this.checked;chrome.storage.local.set({[e]:t},function(){console.log(`Saved ${e}: ${t}`)}),"enable_show_advanced_options"===e&&toggleAdvancedOptions(),"acceptable_ads"===e&&toggleAcceptableAdsInfo(),"prefs__data_collection_opt_out"===e&&toggleDataCollectionOptions()})})}function toggleAdvancedOptions(){let e=document.getElementById("enable_show_advanced_options").checked,t=document.querySelectorAll(".advanced");t.forEach(t=>{t.style.display=e?"block":"none"})}function toggleAcceptableAdsInfo(){let e=document.getElementById("acceptable_ads").checked,t=document.getElementById("acceptable_ads_info");t.style.display=e?"none":"block"}function toggleDataCollectionOptions(){let e=document.getElementById("prefs__data_collection_opt_out").checked,t=document.getElementById("enable_data_collection_v2").closest("li"),l=document.getElementById("prefs__send_ad_wall_messages").closest("li");t&&(t.style.display=e?"none":"flex"),l&&(l.style.display=e?"none":"flex")}document.addEventListener("DOMContentLoaded",function(){loadSettings(),setupEventListeners()});